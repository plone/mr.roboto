<html>
    <head>
        <title>Mr. Roboto</title>
        <style>
            #logo {
                width: 100%;
                height: 100%;
                background: url('/static/roboto.png') no-repeat 50% 50%;
            }
            ul {
                list-style-type: none
            }
            .resultsjk {
                font-size: 24pt;
            }
        </style>
        <script>
             function refresh() {
                 window.location.reload(true);
             }

             setTimeout(refresh, 5000);
        </script>
    </head>
    <body>
        <div id="options">
            <h2><span tal:content="python: push.repo"></span><span tal:content="python: push.branch"></span></h2>
            <h2 tal:content="python: push.who"></h2>
            <h3 tal:content="python: push.date"></h3>

            <table class="table resultsjk">
            <tal:jk repeat="job jobs">
                <tr>
                    <td>
                        <tal:passes condition="python: job['result']==None">
                            <p style="background-color:yellow;">No result</p>
                        </tal:passes>
                        <tal:passes condition="python: job['result'] is True">
                            <p style="background-color:green;">Success</p>
                        </tal:passes>
                        <tal:passes condition="python: job['result'] is False">
                            <p style="background-color:red;">Failure</p>
                        </tal:passes>
                    </td>
                    <td>
                        <p tal:content="python: job['jk_name']"></p>
                    </td>
<!--                     <td>
                        <p tal:content="python: job['jk_uid']"></p>
                    </td>
                    <td>
                        <p tal:content="python: job['date']"></p>
                    </td>
 -->                    <td>
                        <a tal:attributes="href python: job['jk_url']">Go to</a>
                    </td>
                </tr>
            </tal:jk>
            </table>
            <tal:broken condition="broken">
                <h1> Mr. Roboto says : DON'T COMMIT NEW CODE ON BROKEN BUILD, FIX THE BUILD</h1>
                <h2> Broken since <span tal:content="since"></span></h2>
            </tal:broken>

            <h2>Commits</h2>
            <tal:commits repeat="commit python: push.data">
                <h3>Message</h3>
                <p tal:content="python: commit['short_commit_msg']"></p>
<!--                 <h3>Diff</h3>
                <pre tal:content="structure python: commit['diff']"></pre>
 -->                <h3>Files</h3>
                <tal:files repeat="file python: commit['files']">
                    <p tal:content="file"></p>
                </tal:files>
            </tal:commits>


        </div>
    </body>
</html>
